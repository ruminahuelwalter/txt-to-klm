<div class="card-container">
<p-card header="Convertir un archivo TXT separado por tabulaciones a KML" class=" p-1 mx-auto text-center w-full md:w-6 lg:w-4">
    <br>
  <div class="p-fluid p-formgrid p-grid">
    <div class="p-col-12 p-md-6">
      <p-fileUpload 
        mode="basic" 
        name="txtFile" 
        chooseLabel="Seleccionar archivo" 
        (onSelect)="onFileSelected($event)"
        accept=".txt,.csv"
        auto="true">
      </p-fileUpload>
    </div>

    <div class="p-col-12 p-md-6 flex align-items-center justify-content-end gap-4 p-2">
      <p-button styleClass="succes-btn" 
        label="Borrar datos" 
        icon="pi pi-trash" 
        severity="danger" 
        class="m-2" 
        (click)="clearData()" 
        *ngIf="previewData.length > 0">
      </p-button>

      <p-button styleClass= "secondary-btn"
        label="Descargar KML" 
        icon="pi pi-download" 
        (click)="downloadKML()" 
        *ngIf="kmlData">
      </p-button>
    </div>
  </div>

  <p-table 
    *ngIf="previewData.length > 0" 
    [value]="previewData" 
    [rows]="10" 
    [paginator]="false" 
    responsiveLayout="scroll"
    class="mt-4">

    <ng-template pTemplate="header">
      <tr>
        <th>Folio</th>
        <th>Nombre</th>
        <th>Dirección</th>
        <th>Socio</th>
        <th>Suministro</th>
        <th>Medidor</th>
        <th>Latitud</th>
        <th>Longitud</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>
      <tr>
        <td>{{ row.folio }}</td>
        <td>{{ row.nombre }}</td>
        <td>{{ row.direccion }}</td>
        <td>{{ row.socio }}</td>
        <td>{{ row.sum }}</td>
        <td>{{ row.medidor }}</td>
        <td>{{ row.latitud }}</td>
        <td>{{ row.longitud }}</td>
      </tr>
    </ng-template>
  </p-table>
  <br>
  <p *ngIf="!previewData.length" class="text-gray-600 text-sm mt-4">
    Seleccioná un archivo TXT separado por tabulaciones para ver una vista previa y generar el KML.
  </p>

  <p class="custom-title">WR60</p>
</p-card>

</div>